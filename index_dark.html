<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- モバイル対応用 -->
    <title>OpenMap Style</title>
    <link
        href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css"
        rel="stylesheet"
    />
    <style>
        /* ページ全体に地図をフィットさせる */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden; /* モバイルでスクロールを防止 */
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
    <script>
        function gtag() {
            dataLayer.push(arguments)
        }
        window.dataLayer = window.dataLayer || [],
            gtag("js", new Date),
            gtag("config", "G-8VWB8QL0YG")
    </script>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/pmtiles/dist/pmtiles.js"></script>
<!-- MapLibre GL JS のスクリプト -->
<script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>

<script>
    let protocol = new pmtiles.Protocol();
    maplibregl.addProtocol("pmtiles", protocol.tile);

    const map = new maplibregl.Map({
        container: 'map',
        style: 'openstyle_dark.json',
        center: [140.084556, 36.104611],
        zoom: 5,
        touchZoomRotate: true
    });

    const navControl = new maplibregl.NavigationControl({
        visualizePitch: true // ピッチ（傾き）のコントロールを有効化
    });
    map.addControl(navControl, 'top-right'); // 右上に表示

    const geolocateControl = new maplibregl.GeolocateControl({
        positionOptions: {
            enableHighAccuracy: true
        },
        trackUserLocation: true,
        showUserHeading: true
    });
    map.addControl(geolocateControl, 'top-right'); // 右上に表示（ナビゲーションコントロールの近く）

    map.on('load', () => {
        console.log('Map has loaded');
    });
</script>
</body>
</html>